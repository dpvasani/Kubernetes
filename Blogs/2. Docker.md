# Notes & Cheatsheet: â€œDockerizing an App â€“ CKA Series #2â€  

ğŸ¯ Goal of the video  
- Show, **from scratch**, how to containerise (â€œdockeriseâ€) a sample Node.js app, push it to Docker Hub and run it anywhere.  
- Lays foundation for later CKA topics (pods, images, registries, best-practices).  

## 1 â€ŠPrerequisites & Sandbox options  
- Local install: **Docker Desktop** (Mac, Windows, Linux).  
- Zero-install alternative: **Play-with-Docker** (Docker-provided 4-hour sandbox).  
  ```
  labs.play-with-docker.com  â†’  Start  â†’  Add new instance
  ```

## 2 â€ŠClone sample project  

```bash
# create workspace
mkdir day02_code && cd day02_code      

# pull sample â€œgetting-startedâ€ todo app
git clone https://github.com/docker/getting-started.git
cd getting-started/app        # contains package.json, src/, etc.
```

## 3 â€ŠWrite the Dockerfile  

```dockerfile
# â”€â”€â”€ 1. Base image â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FROM node:18-alpine                              # tiny Linux + Node.js

# â”€â”€â”€ 2. Set workdir inside container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
WORKDIR /app

# â”€â”€â”€ 3. Copy source code into image â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
COPY . .

# â”€â”€â”€ 4. Install prod deps only â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RUN yarn install --production

# â”€â”€â”€ 5. Expose port app listens on â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
EXPOSE 3000

# â”€â”€â”€ 6. Container start-up command â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CMD ["node","src/index.js"]
```

ğŸ§© Flow diagram  

```
Host FS â”€â–º docker build
          â”‚
          â–¼
      Dockerfile  â”€â”€â–º  Layered Image (base â†’ code â†’ deps) â”€â”€â–º Registry
```

## 4 â€ŠBuild image locally  

```bash
docker build -t day02-todo:latest .
```

Image is now visible via: `docker images` or Docker-Desktop > Images.

## 5 â€ŠPush to Docker Hub  

```bash
# 1. create repo on hub:  /test-repo  (public is fine)

# 2. tag local image for hub
docker tag day02-todo:latest  /test-repo:latest

# 3. login and push
docker login
docker push /test-repo:latest
```

## 6 â€ŠRun the container anywhere  

```bash
# pull (if on fresh machine)
docker pull /test-repo:latest

# run detached, publish host:3000 â†’ container:3000
docker run -d -p 3000:3000 --name todoapp /test-repo:latest
```

Open http://localhost:3000 ğŸ“âœ….

## 7 â€ŠTroubleshoot inside the container  

```bash
# open an interactive shell (Alpine uses sh)
docker exec -it todoapp sh
# inspect files, logs, env, etc.
```

## 8 â€ŠKey Docker CLI quick-ref  

| Task | Command |
|------|---------|
| List images | `docker images` |
| List running containers | `docker ps` |
| Stop & remove | `docker stop  && docker rm ` |
| Remove image | `docker rmi ` |
| Clean dangling layers | `docker system prune` |

## 9 â€ŠNext-step teaser ğŸ£  
Image weighs 217 MBâ€”too big for a tiny todo app!  
Hint for next video: **multi-stage builds** and other best practices shrink it dramatically.  

### ğŸ’¡ Takeaways  
- **Dockerfile = deterministic recipe** â†’ identical runtime everywhere.  
- **Layered cache** speeds builds & transfers.  
- **Registry push/pull** workflow mirrors real CI/CD pipelines.  
- Knowing basic `docker build/run/exec` is a must before jumping into Kubernetes objects (pods, deployments, etc.). ğŸ“